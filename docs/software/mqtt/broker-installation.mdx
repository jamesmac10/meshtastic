---
id: installation
title: MQTT Broker Installation
sidebar_label: Broker Installation
slug: /software/mqtt/broker-installation
sidebar_position: 1
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::tip
Installing a MQTT Broker is only necessary if you want to use a broker other than the publicly available one.
:::

## Using Mosquitto

### Install `mosquitto`

<Tabs
groupId="operating-system"
defaultValue="linux"
values={[
{label: 'Linux', value: 'linux'},
{label: 'macOS', value: 'macos'},
{label: 'Windows', value: 'windows'},
]}>

<TabItem value="linux">
</TabItem>
<TabItem value="macos">

```shell
brew install mosquitto
```

</TabItem>
<TabItem value="windows">
</TabItem>

</Tabs>

### Start `mosquitto` Server

<Tabs
groupId="operating-system"
defaultValue="linux"
values={[
{label: 'Linux', value: 'linux'},
{label: 'macOS', value: 'macos'},
{label: 'Windows', value: 'windows'},
]}>

<TabItem value="linux">
</TabItem>
<TabItem value="macos">

```shell
brew services restart mosquitto
```

</TabItem>
<TabItem value="windows">
</TabItem>

</Tabs>

### Test `mosquitto` Server

<Tabs
groupId="operating-system"
defaultValue="linux"
values={[
{label: 'Linux', value: 'linux'},
{label: 'macOS', value: 'macos'},
{label: 'Windows', value: 'windows'},
]}>

<TabItem value="linux">
</TabItem>
<TabItem value="macos">

#### Subscribe to a topic

```shell
mosquitto_sub -t test/hello
```

#### Publish to a topic

```shell
mosquitto_pub -h localhost -q 0 -t test/hello -m 'yo!'
```

</TabItem>
<TabItem value="windows">
</TabItem>

</Tabs>

### Allow Meshtastic Access

<Tabs
groupId="operating-system"
defaultValue="linux"
values={[
{label: 'Linux', value: 'linux'},
{label: 'macOS', value: 'macos'},
{label: 'Windows', value: 'windows'},
]}>

<TabItem value="linux">
</TabItem>
<TabItem value="macos">

For Meshtastic to be able to access that server, two settings need to be changed in the `/usr/local/etc/mosquitto/mosquitto.conf` file.

```shell
listener 1883 0.0.0.0
allow_anonymous true
```

</TabItem>
<TabItem value="windows">
</TabItem>

</Tabs>

### Restart Server

<Tabs
groupId="operating-system"
defaultValue="linux"
values={[
{label: 'Linux', value: 'linux'},
{label: 'macOS', value: 'macos'},
{label: 'Windows', value: 'windows'},
]}>

<TabItem value="linux">
</TabItem>
<TabItem value="macos">

```shell
brew services restart mosquitto
```
:::note
If you are using the MacOS firewall, you will need to go into: `System Preferences > Security & Privacy > Firewall > Firewall Options` and add **it** (FIXME - be more specific).
:::

</TabItem>
<TabItem value="windows">
</TabItem>

</Tabs>
